include_rules

ifeq (@(NETHACK),y)

: foreach makedefs.c panic.c recover.c ../src/monst.c ../src/objects.c |> !host_cc -m32 |> %B.host.o
: makedefs.host.o monst.host.o objects.host.o |> !host_ld -m32 |> makedefs

# After the foreach *.c - these are built in ../dat to avoid the circular
# dependency with makedefs creating headers in include/, which are needed for
# a few of these .c files.
: foreach *.l |> !flex |> %B_lex.c
: foreach *.y |> !bison |> %B.c %B.h

endif
